0. crun init 
i) init the base filessystem and dirs 
ii) setup configs
iii) logger setup from stored configs


1. crun pull <image>

i) filesystem work. No namespaces. No cgroups.
ii) Download image tar (or fake it locally first)

blobs - - > layers ??? (optimal)

iii) Extract layers
iv) /var/lib/crun/images/<image>/
  ├── layers/
  └── merged/

2. crun start <image>

i) Create container directory
ii) Mount overlayfs → merged/
iii) clone() child with: NEWPID NEWNS (mount) NEWUTS NEWNET (optional at first)
iv) Inside child:
chroot or pivot_root
mount proc
execve("/bin/sh")
v) Parent:
Create cgroups
Move child PID into cgroups
Save metadata (pid, state)



3. crun pause <id> 
cgroup freezer

4. crun resume <id>
Inverse of pause

5. crun stop <id>
i) Send SIGTERM
ii) Wait N seconds
iii) SIGKILL if needed
iv) Mark container STOPPED


6. crun remove container <>
If container is RUNNING → refuse
If container is PAUSED → refuse
Only allowed when STOPPED

What it removes:
    overlay mount
    container rootfs
    container cgroups
    container metadata
    PID tracking

7. crun remove image <> / 
If any container exists using this image → refuse
If image not present → error

What it removes:
image layers
extracted rootfs
image metadata


/var/lib/crun/
  ├── blobs/sha256/<digest>
  ├── images/
  │     └── ubuntu/ (manifest.json, config.json)
  │           ├── layers/
  │           └── rootfs/
  ├── containers/
  │     └── c1/
  │           ├── rootfs -> overlay mount
  │           ├── state.json
  │           └── pid
